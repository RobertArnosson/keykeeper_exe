<TooltipMDIconButtonNewPass@MDIconButton+MDTooltip>

<FilterButton>:
    size_hint: 1, 1

    MDRectangleFlatButton:
        id: filter_button
        size_hint: 1, 1
        text: root.text
        text_color: app.theme_cls.bg_normal
        font_size: 18
        md_bg_color: app.theme_cls.primary_color
        on_release: root.parent.parent.parent.parent.parent.parent.menu_filter.open()

    MDIcon:
        icon: root.icon
        theme_text_color: "Custom"
        size_hint: 1, 1
        size_hint_max_x: 75
        size_hint_max_y: 75
        font_size: 30
        text_color: app.theme_cls.bg_normal
        pos_hint: {"right": 0.95, "center_y": .5}
        pos: 25, 0

<NewFilterScreen>
    MDGridLayout:
        cols: 1
        size: root.width, root.height

        MDGridLayout:
            cols: 1
            size_hint: 1, 0.25
            size_hint_max_y: 200

            MDLabel:
                text: "Save a new password"
                font_style: 'H3'
                halign: 'center'

        MDAnchorLayout:
            size_hint: 1, 1
            anchor_x: 'center'
            anchor_y: 'center'

            MDBoxLayout:
                orientation: "vertical"
                padding: 20
                size_hint: 0.35, None
                height: self.minimum_height
                size_hint_max_x: 550
                pos_hint: {"center_x": .5, "center_y": .5}
                elevation: 4
                shadow_radius: 6
                shadow_offset: 0, 2

                BoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, None
                    height: self.minimum_height
                    spacing: dp(20)
                    padding: dp(20)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                    FilterTextField:
                        id: filter_text
                        hint_text: "Filter Name"
                        mode: "rectangle"
                        max_text_length: 12
                        multiline: False
                        allow_copy: False
                        write_tab: False
                        size_hint_x: 1
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                    MDBoxLayout:
                        size_hint: 1, None
                        height: 2

                        MDBoxLayout:
                            size_hint: 1, None
                            height: 2
                            md_bg_color: app.theme_cls.bg_dark

                    MDBoxLayout:
                        orientation: 'horizontal'
                        size_hint: 1, None
                        height: 35
                        spacing: 20
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                        TooltipMDIconButtonNewPass:
                            id: icon_select
                            icon: 'key-variant'
                            tooltip_text: "Icons is not fully implemented yet for filters,\nbut will be used when implemented in the future.\n--- --- --- --- --- --- --- !!! --- --- --- --- --- --- ---\nUse the arrow keys to cycle the icons.\nClick the icon to disable/enable icons."
                            tooltip_bg_color: app.theme_cls.bg_dark
                            tooltip_text_color: 1, 1, 1, 0.8
                            size_hint: 1, 1
                            size_hint_max_x: self.parent.size[1]
                            on_release:
                                root.disable_icon()

                        FilterButton:
                            id: filter_container
                            text: "Filter"
                            icon: 'chevron-down'
                            size_hint: 1, 1

                    MDBoxLayout:
                        size_hint: 1, None
                        height: 2

                        MDBoxLayout:
                            size_hint: 1, None
                            height: 2
                            md_bg_color: app.theme_cls.bg_dark

                    MDGridLayout:
                        cols: 2
                        size_hint: 1, 1
                        size_hint_min_y: 35
                        size_hint_max_y: 40
                        spacing: 15
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                        MDRectangleFlatButton:
                            text: "Save Filter"
                            font_style: 'Subtitle2'
                            size_hint: 0.5, 1
                            size_hint_max_x: 300
                            text_color: app.theme_cls.bg_normal
                            md_bg_color: app.theme_cls.primary_color
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            on_release:
                                root.save_new_filter()

                        MDRectangleFlatButton:
                            text: "Remove Filter"
                            font_style: 'Subtitle2'
                            size_hint: 0.5, 1
                            size_hint_max_x: 300
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            on_release:
                                root.remove_filter()

    MDFloatLayout:
        size_hint: 1, 1
        MDAnchorLayout:
            anchor_x: 'right'
            anchor_y: 'bottom'
            padding: 50
            MDFloatingActionButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                icon: 'arrow-right'
                icon_color: app.theme_cls.bg_normal
                elevation: 0
                on_release: root.goto_screen('main', 'left')
